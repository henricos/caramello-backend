# dsl/entities/family_invitation.yaml
# Definition of the FamilyInvitation entity.

name: FamilyInvitation
description: "Manages the invitation flow for families."
table_name: family_invitations

fields:
  - name: id
    type: int
    primary_key: true
    description: "Internal primary key (numeric)."

  - name: uuid
    type: UUID
    unique: true
    default_factory: uuid4
    nullable: false
    description: "Unique public identifier (UUID)."

  - name: family_id
    type: int
    foreign_key: "families.id"
    nullable: false
    description: "ID of the family to which the invitation was sent."

  - name: inviter_id
    type: int
    foreign_key: "users.id"
    nullable: false
    description: "ID of the user who sent the invitation."

  - name: invitee_email
    type: EmailStr
    nullable: false
    description: "Email of the invited user."

  - name: status
    type: str
    max_length: 20
    default: "pending"
    nullable: false
    description: "Status of the invitation (pending, accepted, declined)."

  - name: created_at
    type: datetime
    default_factory: now_utc
    nullable: false
    description: "Timestamp of the invitation's creation."

  - name: expires_at
    type: datetime
    nullable: false
    description: "Timestamp of the invitation's expiration."

relationships:
  - name: family
    type: "Family"
    back_populates: "invitations"

  - name: inviter
    type: "User"
    back_populates: "sent_invitations"
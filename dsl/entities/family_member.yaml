# dsl/entities/family_member.yaml
# Definition of the FamilyMember association table.

name: FamilyMember
description: "Association table connecting Users and Families, defining the role of each member."
table_name: family_members
is_link_model: true # Indicates it is an association model for a M:M relationship

fields:
  - name: user_id
    type: int
    foreign_key: "users.id"
    primary_key: true
    description: "Foreign key for the users table."

  - name: family_id
    type: int
    foreign_key: "families.id"
    primary_key: true
    description: "Foreign key for the families table."

  - name: role
    type: str
    max_length: 20
    default: "member"
    nullable: false
    description: "User's role in the family (e.g., admin, member)."

  - name: joined_at
    type: datetime
    default_factory: now_utc
    nullable: false
    description: "Timestamp of when the user joined the family."

relationships:
  - name: user
    type: "User"
    back_populates: "families"

  - name: family
    type: "Family"
    back_populates: "members"